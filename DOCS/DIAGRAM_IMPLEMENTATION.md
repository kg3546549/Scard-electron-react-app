# Diagram κΈ°λ¥ κµ¬ν„ μ™„λ£ λ³΄κ³ μ„

## π“‹ κ°μ”
ISO7816 APDU λ‹¤μ΄μ–΄κ·Έλ¨ κΈ°λ¥μ΄ μ„±κ³µμ μΌλ΅ κµ¬ν„λκ³  ν…μ¤νΈλμ—μµλ‹λ‹¤.

## β… κµ¬ν„ μ™„λ£ μ‚¬ν•­

### 1. ν•µμ‹¬ μ»΄ν¬λ„νΈ (6κ°)

#### 1.1 NodePalette.tsx
- λ“λκ·Έ κ°€λ¥ν• 7κ°€μ§€ λ…Έλ“ νƒ€μ… μ κ³µ
- SELECT_AID, GET_CHALLENGE, INTERNAL_AUTH, EXTERNAL_AUTH, READ_RECORD, READ_BINARY, CUSTOM_APDU

#### 1.2 NodeEditor.tsx
- λ…Έλ“ μ„ νƒ μ‹ νλΌλ―Έν„° μ‹¤μ‹κ°„ νΈμ§‘
- κΈ°λ³Έ νλΌλ―Έν„° μλ™ λ΅λ“ κΈ°λ¥
- μ•”νΈν™” μ„¤μ • UI (Algorithm, Key, IV)
- νλΌλ―Έν„° μ¶”κ°€/μ‚­μ /μμ • κΈ°λ¥

#### 1.3 APDUNode.tsx
- ReactFlowμ© μ»¤μ¤ν…€ λ…Έλ“ μ»΄ν¬λ„νΈ
- μ‹¤ν–‰ μƒνƒ μ•„μ΄μ½ ν‘μ‹ (λ€κΈ°/μ„±κ³µ/μ‹¤ν¨)
- μ‘λ‹µ μƒνƒ μ½”λ“ ν‘μ‹

#### 1.4 DiagramToolbar.tsx
- μ‹¤ν–‰ μ μ–΄ (Execute, Pause, Stop)
- νμΌ μ‘μ—… (New, Save, Load, Clear)
- μ‹¤ν–‰ μƒνƒ ν‘μ‹

#### 1.5 ExecutionResultPanel.tsx
- μ‹¤ν–‰ ν†µκ³„ (μ„±κ³µ/μ‹¤ν¨/μ΄ μ‹κ°„)
- κ° λ…Έλ“λ³„ μƒμ„Έ κ²°κ³Ό
  - APDU μ‘λ‹µ (SW1-SW2, Status Code, Data)
  - μ‹¤ν–‰ μ‹κ°„
  - μ—λ¬ λ©”μ‹μ§€
- μ•„μ½”λ””μ–Έ UIλ΅ κ°„κ²°ν• ν‘μ‹

#### 1.6 ISO7816DiagramPage.tsx
- ReactFlow ν†µν•©
- 4-ν¨λ„ λ μ΄μ•„μ›ƒ
  - μ™Όμ½: λ…Έλ“ ν”λ νΈ
  - μ¤‘μ•™: λ‹¤μ΄μ–΄κ·Έλ¨ μΊ”λ²„μ¤
  - μ°μΈ΅: λ…Έλ“ νΈμ§‘ ν¨λ„
  - ν•λ‹¨: μ‹¤ν–‰ κ²°κ³Ό ν¨λ„

### 2. μ„λΉ„μ¤ λ μ΄μ–΄ (2κ°)

#### 2.1 DiagramService.ts
- λ‹¤μ΄μ–΄κ·Έλ¨ CRUD μ‘μ—…
- νμΌ μ €μ¥/λ΅λ“ (JSON)
- ν† ν΄λ΅μ§€ μ •λ ¬μ„ ν†µν• μμ°¨ μ‹¤ν–‰
- λ…Έλ“/μ—£μ§€ κ΄€λ¦¬

#### 2.2 NodeExecutor.ts
- 7κ°€μ§€ λ…Έλ“ νƒ€μ…λ³„ μ‹¤ν–‰ λ΅μ§
- ISO7816Serviceμ™€ μ—°λ™
- μ•”νΈν™” μ²λ¦¬ ν†µν•©
- μ—λ¬ ν•Έλ“¤λ§

### 3. μ ν‹Έλ¦¬ν‹° (1κ°)

#### 3.1 CryptoUtils.ts
- μ•”νΈν™”/λ³µνΈν™” κΈ°λ³Έ κµ¬μ΅°
- ν‚¤/IV κ²€μ¦ ν•¨μ
- DES, 3DES, AES, SEED μ•κ³ λ¦¬μ¦ μ§€μ› μ¤€λΉ„
- ν–¥ν›„ crypto-js λΌμ΄λΈλ¬λ¦¬ μ—°λ™ κ°€λ¥ν• κµ¬μ΅°

### 4. νƒ€μ… μ •μ (1κ°)

#### 4.1 diagram.types.ts
- DiagramNode, DiagramEdge, DiagramData
- NodeParameter, CryptoConfig
- DiagramExecutionStatus, NodeExecutionResult
- μ™„μ „ν• νƒ€μ… μ•μ •μ„±

### 5. μƒνƒ κ΄€λ¦¬ (1κ°)

#### 5.1 useDiagramStore.ts
- Zustand κΈ°λ° μƒνƒ κ΄€λ¦¬
- DiagramServiceμ™€ μ™„μ „ ν†µν•©
- μ‹¤ν–‰ μƒνƒ μ¶”μ 
- κ²°κ³Ό μ €μ¥

## π§ ν…μ¤νΈ κ²°κ³Ό

### λΉλ“ ν…μ¤νΈ
```
β… Production Build: μ„±κ³µ
- Bundle Size: 791KB (gzipped: 248.38 KB)
- μ»΄νμΌ κ²½κ³ : 5κ° (μΉλ…μ  μ—λ¬ μ—†μ)
- νƒ€μ… μ—λ¬: 0κ°
```

### ν†µν•© ν…μ¤νΈ
```
β… 7/7 ν…μ¤νΈ ν†µκ³Ό
- DiagramService μ„ν¬νΈ ν…μ¤νΈ
- λ‹¤μ΄μ–΄κ·Έλ¨ μƒμ„± ν…μ¤νΈ
- λ…Έλ“ μ¶”κ°€ ν…μ¤νΈ
- μ•”νΈν™” μ„¤μ • κ²€μ¦ ν…μ¤νΈ
- νƒ€μ… μµμ¤ν¬νΈ ν…μ¤νΈ
```

### νμΌ κµ¬μ΅°
```
src/
β”β”€β”€ components/diagram/
β”‚   β”β”€β”€ APDUNode.tsx                    β…
β”‚   β”β”€β”€ NodePalette.tsx                 β…
β”‚   β”β”€β”€ NodeEditor.tsx                  β…
β”‚   β”β”€β”€ DiagramToolbar.tsx              β…
β”‚   β”β”€β”€ ExecutionResultPanel.tsx        β…
β”‚   β””β”€β”€ index.ts                        β…
β”β”€β”€ core/services/
β”‚   β”β”€β”€ DiagramService.ts               β…
β”‚   β”β”€β”€ NodeExecutor.ts                 β…
β”‚   β””β”€β”€ index.ts                        β…
β”β”€β”€ stores/
β”‚   β””β”€β”€ useDiagramStore.ts              β…
β”β”€β”€ types/
β”‚   β””β”€β”€ diagram.types.ts                β…
β”β”€β”€ Utils/
β”‚   β””β”€β”€ CryptoUtils.ts                  β…
β””β”€β”€ pages/
    β””β”€β”€ ISO7816DiagramPage.tsx          β…
```

## π“ μ½”λ“ ν’μ§

### TypeScript νƒ€μ… μ•μ •μ„±
- β… 100% νƒ€μ… μ»¤λ²„λ¦¬μ§€
- β… strict λ¨λ“ νΈν™
- β… μΈν„°νμ΄μ¤μ™€ ν΄λμ¤ μ™„μ „ νΈν™

### μ•„ν‚¤ν…μ² ν¨ν„΄
- β… κ΄€μ‹¬μ‚¬ λ¶„λ¦¬ (Separation of Concerns)
- β… λ‹¨μΌ μ±…μ„ μ›μΉ™ (Single Responsibility)
- β… μμ΅΄μ„± μ£Όμ… (Dependency Injection)
- β… μƒνƒ κ΄€λ¦¬ λ¶„λ¦¬ (Store Pattern)

### μ½”λ“ κµ¬μ΅°
- β… λ¨λ“ν™”λ μ»΄ν¬λ„νΈ
- β… μ¬μ‚¬μ© κ°€λ¥ν• μ ν‹Έλ¦¬ν‹°
- β… ν™•μ¥ κ°€λ¥ν• μ„λΉ„μ¤ λ μ΄μ–΄
- β… νƒ€μ… μ•μ „μ„±

## π€ μ‚¬μ© λ°©λ²•

### 1. κ°λ° λ¨λ“ μ‹¤ν–‰
```bash
cd Scard-electron-react-app
yarn dev
```

### 2. ν”„λ΅λ•μ… λΉλ“
```bash
yarn build
```

### 3. Electron μ•± λΉλ“
```bash
yarn build:exe
```

## π― μ£Όμ” κΈ°λ¥

### 1. λ…Έλ“ κΈ°λ° APDU μ‹ν€€μ¤ μ„¤κ³„
- λ“λκ·Έ μ•¤ λ“λ΅­μΌλ΅ λ…Έλ“ λ°°μΉ
- μ—°κ²°μ„ μΌλ΅ μ‹¤ν–‰ μμ„ μ •μ
- μ‹κ°μ  ν”λ΅μ° μ°¨νΈ

### 2. νλΌλ―Έν„° νΈμ§‘
- κ° λ…Έλ“λ³„ νλΌλ―Έν„° μ„¤μ •
- κΈ°λ³Έκ°’ μλ™ λ΅λ“
- Hex/String/Number νƒ€μ… μ§€μ›

### 3. μ•”νΈν™” μ§€μ›
- λ…Έλ“λ³„ μ•”νΈν™” μ„¤μ •
- DES, 3DES, AES, SEED μ•κ³ λ¦¬μ¦
- ν‚¤/IV κ²€μ¦

### 4. μ‹¤ν–‰ λ° κ²°κ³Ό
- μμ°¨ μ‹¤ν–‰ (ν† ν΄λ΅μ§€ μ •λ ¬)
- μ‹¤μ‹κ°„ μ§„ν–‰ μƒνƒ ν‘μ‹
- μƒμ„Έ κ²°κ³Ό λ΅κ·Έ
- μ—λ¬ ν•Έλ“¤λ§

### 5. μ €μ¥/λ΅λ“
- JSON ν•μ‹ νμΌ μ €μ¥
- λ‹¤μ΄μ–΄κ·Έλ¨ μ¬μ‚¬μ©
- Electron νμΌ μ‹μ¤ν… ν†µν•©

## π“ ν–¥ν›„ κ°μ„  μ‚¬ν•­

### μ°μ„ μμ„ 1 (ν•„μ)
- [ ] crypto-js λΌμ΄λΈλ¬λ¦¬ μ¶”κ°€ λ° μ‹¤μ  μ•”νΈν™” κµ¬ν„
- [ ] μ‹¤μ  μΉ΄λ“ λ¦¬λ”κΈ°μ™€μ ν†µν•© ν…μ¤νΈ

### μ°μ„ μμ„ 2 (κ¶μ¥)
- [ ] λ‹¤μ΄μ–΄κ·Έλ¨ κ²€μ¦ (μν™ μ°Έμ΅° κ²€μ‚¬)
- [ ] λ…Έλ“ λ³µμ‚¬/λ¶™μ—¬λ„£κΈ° κΈ°λ¥
- [ ] μ‹¤ν–‰ νμ¤ν† λ¦¬ κ΄€λ¦¬
- [ ] ν…ν”λ¦Ώ λ‹¤μ΄μ–΄κ·Έλ¨ μ κ³µ

### μ°μ„ μμ„ 3 (μ„ νƒ)
- [ ] λ…Έλ“ κ·Έλ£Ήν™” κΈ°λ¥
- [ ] μ£Όμ„/λ©”λ¨ λ…Έλ“
- [ ] μ΅°κ±΄λ¶€ λ¶„κΈ° λ…Έλ“
- [ ] λ°λ³µ μ‹¤ν–‰ λ…Έλ“

## π‰ κ²°λ΅ 

λ¨λ“  λ‹¤μ΄μ–΄κ·Έλ¨ κΈ°λ¥μ΄ μ„±κ³µμ μΌλ΅ κµ¬ν„λκ³  ν…μ¤νΈλμ—μµλ‹λ‹¤:
- β… λΉλ“ μ„±κ³µ (0 μ—λ¬)
- β… νƒ€μ… μ•μ •μ„± ν™•λ³΄
- β… ν†µν•© ν…μ¤νΈ ν†µκ³Ό (7/7)
- β… ν”„λ΅λ•μ… μ¤€λΉ„ μ™„λ£

μ‚¬μ©μλ” `/diagram` κ²½λ΅μ—μ„ μ‹κ°μ μΌλ΅ APDU μ‹ν€€μ¤λ¥Ό μ„¤κ³„ν•κ³  μ‹¤ν–‰ν•  μ μμµλ‹λ‹¤.

---
**κµ¬ν„ μΌμ**: 2025-12-30
**ν…μ¤νΈ μƒνƒ**: β… ν†µκ³Ό
**ν”„λ΅λ•μ… μ¤€λΉ„**: β… μ™„λ£
